{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Danny Store e-commerce platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "googleId": {
          "type": "string",
          "description": "User ID from Google authentication provider, if applicable."
        },
        "facebookId": {
          "type": "string",
          "description": "User ID from Facebook authentication provider, if applicable."
        },
        "appleId": {
          "type": "string",
          "description": "User ID from Apple authentication provider, if applicable."
        },
        "whatsappNumber": {
          "type": "string",
          "description": "User's WhatsApp number for order updates and communication.",
          "format": "string"
        },
        "preferredLanguage": {
          "type": "string",
          "description": "User's preferred language (FR, EN, Krey√≤l).",
          "format": "string"
        }
      },
      "required": [
        "id",
        "whatsappNumber"
      ]
    },
    "Product": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Product",
      "type": "object",
      "description": "Represents a product available in the Danny Store catalog.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the product."
        },
        "name": {
          "type": "string",
          "description": "Name of the product."
        },
        "shortDescription": {
          "type": "string",
          "description": "Short description of the product."
        },
        "longDescription": {
          "type": "string",
          "description": "Long description of the product."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the product image.",
          "format": "uri"
        },
        "category": {
          "type": "string",
          "description": "Category of the product (e.g., clothing, shoes, accessories, tech-style)."
        },
        "averageRating": {
          "type": "number",
          "description": "Average rating of the product based on customer reviews."
        },
        "numberOfReviews": {
          "type": "number",
          "description": "Number of reviews for the product."
        }
      },
      "required": [
        "id",
        "name",
        "shortDescription",
        "imageUrl",
        "category"
      ]
    },
    "ProductVariant": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ProductVariant",
      "type": "object",
      "description": "Represents a specific variant of a product (e.g., color, size).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the product variant."
        },
        "productId": {
          "type": "string",
          "description": "Reference to Product. (Relationship: Product 1:N ProductVariant)"
        },
        "color": {
          "type": "string",
          "description": "Color of the product variant."
        },
        "size": {
          "type": "string",
          "description": "Size of the product variant."
        },
        "price": {
          "type": "number",
          "description": "Price of the product variant."
        },
        "promoPrice": {
          "type": "number",
          "description": "Promotional price of the product variant, if applicable."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the product variant image.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "productId",
        "color",
        "size",
        "price"
      ]
    },
    "Order": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Order",
      "type": "object",
      "description": "Represents a customer order.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the order."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Order)"
        },
        "orderDate": {
          "type": "string",
          "description": "Date and time when the order was placed.",
          "format": "date-time"
        },
        "totalAmount": {
          "type": "number",
          "description": "Total amount of the order."
        },
        "status": {
          "type": "string",
          "description": "Status of the order (e.g., pending, processing, shipped, delivered)."
        }
      },
      "required": [
        "id",
        "userId",
        "orderDate",
        "totalAmount",
        "status"
      ]
    },
    "OrderItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "OrderItem",
      "type": "object",
      "description": "Represents an item within an order.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the order item."
        },
        "orderId": {
          "type": "string",
          "description": "Reference to Order. (Relationship: Order 1:N OrderItem)"
        },
        "productVariantId": {
          "type": "string",
          "description": "Reference to ProductVariant. (Relationship: ProductVariant 1:N OrderItem)"
        },
        "quantity": {
          "type": "number",
          "description": "Quantity of the product variant in the order item."
        },
        "price": {
          "type": "number",
          "description": "Price of the product variant at the time of the order."
        }
      },
      "required": [
        "id",
        "orderId",
        "productVariantId",
        "quantity",
        "price"
      ]
    },
    "ProductReview": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ProductReview",
      "type": "object",
      "description": "Represents a customer review for a product.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the product review."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N ProductReview)"
        },
        "productId": {
          "type": "string",
          "description": "Reference to Product. (Relationship: Product 1:N ProductReview)"
        },
        "rating": {
          "type": "number",
          "description": "Rating given by the user for the product (1-5)."
        },
        "comment": {
          "type": "string",
          "description": "Comment provided by the user about the product."
        },
        "reviewDate": {
          "type": "string",
          "description": "Date and time when the review was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "productId",
        "rating",
        "reviewDate"
      ]
    },
    "VirtualTryOnSession": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "VirtualTryOnSession",
      "type": "object",
      "description": "Represents a user's virtual try-on session and its usage.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the try-on session."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N VirtualTryOnSession)"
        },
        "sessionDate": {
          "type": "string",
          "description": "Date and time when the try-on session started.",
          "format": "date-time"
        },
        "tryonCount": {
          "type": "number",
          "description": "Number of try-on attempts during the session."
        }
      },
      "required": [
        "id",
        "userId",
        "sessionDate",
        "tryonCount"
      ]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a product category.",
      "properties": {
        "nameKey": { "type": "string" },
        "imageUrl": { "type": "string", "format": "uri" },
        "imageHint": { "type": "string" }
      },
      "required": ["nameKey", "imageUrl"]
    },
    "SubCategory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SubCategory",
      "type": "object",
      "description": "Represents a product sub-category.",
      "properties": {
        "nameKey": { "type": "string" },
        "parentCategory": { "type": "string" }
      },
      "required": ["nameKey", "parentCategory"]
    },
    "StoreSettings": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "StoreSettings",
      "type": "object",
      "description": "Represents the store's global settings.",
      "properties": {
        "storeName": { "type": "string" },
        "contactEmail": { "type": "string", "format": "email" },
        "defaultCurrency": { "type": "string", "enum": ["USD", "EUR", "HTG"] },
        "defaultLanguage": { "type": "string", "enum": ["en", "fr", "ht"] }
      },
      "required": ["storeName", "contactEmail", "defaultCurrency", "defaultLanguage"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "schema": { "$ref": "#/backend/entities/User" },
          "description": "Stores user profiles."
        }
      },
      {
        "path": "/products/{productId}",
        "definition": {
          "schema": { "$ref": "#/backend/entities/Product" },
          "description": "Stores product catalog information."
        }
      },
      {
        "path": "/categories/{categoryId}",
        "definition": {
          "schema": { "$ref": "#/backend/entities/Category" },
          "description": "Stores product categories. Publicly readable."
        }
      },
      {
        "path": "/subcategories/{subcategoryId}",
        "definition": {
          "schema": { "$ref": "#/backend/entities/SubCategory" },
          "description": "Stores product sub-categories. Publicly readable."
        }
      },
      {
        "path": "/orders/{orderId}",
        "definition": {
          "schema": { "$ref": "#/backend/entities/Order" },
          "description": "Stores order information."
        }
      },
      {
        "path": "/settings/{settingsId}",
        "definition": {
          "schema": { "$ref": "#/backend/entities/StoreSettings" },
          "description": "Stores global store settings. Should only contain a single document, e.g., 'storeConfig'."
        }
      }
    ]
  }
}