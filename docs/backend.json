{
  "entities": {
    "Article": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Article",
      "type": "object",
      "description": "Represents an article or blog post within the CMS.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Article entity."
        },
        "title": {
          "type": "string",
          "description": "Title of the article."
        },
        "slug": {
          "type": "string",
          "description": "URI-friendly slug for the article."
        },
        "content": {
          "type": "string",
          "description": "Main content of the article (HTML or Markdown)."
        },
        "categoryId": {
          "type": "string",
          "description": "Reference to Category. (Relationship: Category 1:N Article)"
        },
        "tagIds": {
          "type": "array",
          "description": "References to Tags. (Relationship: Tag N:N Article)",
          "items": {
            "type": "string"
          }
        },
        "status": {
          "type": "string",
          "description": "Publication status of the article (draft, published)."
        },
        "metaTitle": {
          "type": "string",
          "description": "Meta title for SEO."
        },
        "metaDescription": {
          "type": "string",
          "description": "Meta description for SEO."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the article was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the article was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "title",
        "slug",
        "content",
        "categoryId",
        "status",
        "createdAt",
        "updatedAt"
      ]
    },
    "Page": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Page",
      "type": "object",
      "description": "Represents a static page within the CMS.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Page entity."
        },
        "title": {
          "type": "string",
          "description": "Title of the page."
        },
        "slug": {
          "type": "string",
          "description": "URI-friendly slug for the page."
        },
        "content": {
          "type": "string",
          "description": "Main content of the page (HTML or Markdown)."
        },
        "status": {
          "type": "string",
          "description": "Publication status of the page (draft, published)."
        },
        "metaTitle": {
          "type": "string",
          "description": "Meta title for SEO."
        },
        "metaDescription": {
          "type": "string",
          "description": "Meta description for SEO."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the page was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the page was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "title",
        "slug",
        "content",
        "status",
        "createdAt",
        "updatedAt"
      ]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a category for organizing articles.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Category entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the category."
        },
        "slug": {
          "type": "string",
          "description": "URI-friendly slug for the category."
        },
        "description": {
          "type": "string",
          "description": "Description of the category."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the category was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the category was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "slug",
        "createdAt",
        "updatedAt"
      ]
    },
    "Tag": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Tag",
      "type": "object",
      "description": "Represents a tag for articles.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Tag entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the tag."
        },
        "slug": {
          "type": "string",
          "description": "URI-friendly slug for the tag."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the tag was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the tag was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "slug",
        "createdAt",
        "updatedAt"
      ]
    },
    "Media": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Media",
      "type": "object",
      "description": "Represents a media asset (image, video, etc.).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Media entity."
        },
        "name": {
          "type": "string",
          "description": "Original name of the media file."
        },
        "url": {
          "type": "string",
          "description": "URL of the media file.",
          "format": "uri"
        },
        "mimeType": {
          "type": "string",
          "description": "MIME type of the media file."
        },
        "size": {
          "type": "number",
          "description": "Size of the media file in bytes."
        },
        "altText": {
          "type": "string",
          "description": "Alternative text for the media file (for accessibility and SEO)."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the media was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the media was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "url",
        "mimeType",
        "size",
        "createdAt",
        "updatedAt"
      ]
    },
    "Menu": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Menu",
      "type": "object",
      "description": "Represents a navigation menu.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Menu entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the menu (e.g., 'Main Menu', 'Footer Menu')."
        },
        "items": {
          "type": "array",
          "description": "Array of menu items.  Each item should contain label and URL.",
          "items": {
            "type": "string"
          }
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the menu was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the menu was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "items",
        "createdAt",
        "updatedAt"
      ]
    },
    "Configuration": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Configuration",
      "type": "object",
      "description": "Represents global configuration settings for the CMS, including customizable design elements.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Configuration entity."
        },
        "siteName": {
          "type": "string",
          "description": "Name of the website."
        },
        "logoUrl": {
          "type": "string",
          "description": "URL of the website logo.",
          "format": "uri"
        },
        "primaryColor": {
          "type": "string",
          "description": "Primary color for the website's theme."
        },
        "secondaryColor": {
          "type": "string",
          "description": "Secondary color for the website's theme."
        },
        "fontFamily": {
          "type": "string",
          "description": "Font family used for the website's typography."
        },
        "homePageSections": {
          "type": "array",
          "description": "Array of sections enabled on the homepage.",
          "items": {
            "type": "string"
          }
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the configuration was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the configuration was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "siteName",
        "primaryColor",
        "secondaryColor",
        "fontFamily",
        "createdAt",
        "updatedAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/articles/{articleId}",
        "definition": {
          "entityName": "Article",
          "schema": {
            "$ref": "#/backend/entities/Article"
          },
          "description": "Stores articles for the CMS. Accessible and manageable only by admins.",
          "params": [
            {
              "name": "articleId",
              "description": "Unique identifier for the article."
            }
          ]
        }
      },
      {
        "path": "/pages/{pageId}",
        "definition": {
          "entityName": "Page",
          "schema": {
            "$ref": "#/backend/entities/Page"
          },
          "description": "Stores pages for the CMS. Accessible and manageable only by admins.",
          "params": [
            {
              "name": "pageId",
              "description": "Unique identifier for the page."
            }
          ]
        }
      },
      {
        "path": "/categories/{categoryId}",
        "definition": {
          "entityName": "Category",
          "schema": {
            "$ref": "#/backend/entities/Category"
          },
          "description": "Stores categories for articles. Accessible and manageable only by admins.",
          "params": [
            {
              "name": "categoryId",
              "description": "Unique identifier for the category."
            }
          ]
        }
      },
      {
        "path": "/tags/{tagId}",
        "definition": {
          "entityName": "Tag",
          "schema": {
            "$ref": "#/backend/entities/Tag"
          },
          "description": "Stores tags for articles. Accessible and manageable only by admins.",
          "params": [
            {
              "name": "tagId",
              "description": "Unique identifier for the tag."
            }
          ]
        }
      },
      {
        "path": "/media/{mediaId}",
        "definition": {
          "entityName": "Media",
          "schema": {
            "$ref": "#/backend/entities/Media"
          },
          "description": "Stores media assets. Accessible and manageable only by admins.",
          "params": [
            {
              "name": "mediaId",
              "description": "Unique identifier for the media asset."
            }
          ]
        }
      },
      {
        "path": "/menus/{menuId}",
        "definition": {
          "entityName": "Menu",
          "schema": {
            "$ref": "#/backend/entities/Menu"
          },
          "description": "Stores navigation menus. Accessible and manageable only by admins.",
          "params": [
            {
              "name": "menuId",
              "description": "Unique identifier for the menu."
            }
          ]
        }
      },
      {
        "path": "/configuration/{configurationId}",
        "definition": {
          "entityName": "Configuration",
          "schema": {
            "$ref": "#/backend/entities/Configuration"
          },
          "description": "Stores global configuration settings. Accessible and manageable only by admins.",
          "params": [
            {
              "name": "configurationId",
              "description": "Unique identifier for the configuration."
            }
          ]
        }
      },
      {
        "path": "/roles_admin/{uid}",
        "definition": {
          "entityName": "roles_admin",
          "schema": {
            "$ref": "#/backend/entities/roles_admin"
          },
          "description": "Documents in this collection represent admin users. The *existence* of a document dictates admin role.",
          "params": [
            {
              "name": "uid",
              "description": "Firebase Auth UID of the admin user."
            }
          ]
        }
      }
    ],
    "reasoning": "This Firestore structure is designed to support the Danny Store e-commerce application, focusing on a CMS-driven frontend with features like product browsing, virtual try-on, and WhatsApp checkout. The design prioritizes security, scalability, and ease of debugging, adhering to the core principles outlined. Specifically, authorization independence is achieved by storing all data under a single authorized admin. This approach makes authorization simpler but requires care when managing data in the application, ensuring that only authorized admins can modify any data. Segregation is used by storing admin-managed data separately from user data. The structure supports the required QAPs by leveraging this admin-only model, ensuring that listing operations are secure and predictable."
  }
}