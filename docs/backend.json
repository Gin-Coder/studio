{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Danny Store e-commerce platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "whatsappNumber": {
          "type": "string",
          "description": "WhatsApp number of the user. Required for order updates."
        },
        "preferredLanguage": {
          "type": "string",
          "description": "User's preferred language (FR, EN, or Kreyòl)."
        },
        "name": {
          "type": "string",
          "description": "User's full name."
        }
      },
      "required": [
        "id",
        "email",
        "whatsappNumber",
        "preferredLanguage",
        "name"
      ]
    },
    "Product": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Product",
      "type": "object",
      "description": "Represents a product available in the Danny Store.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Product entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the product."
        },
        "descriptionShort": {
          "type": "string",
          "description": "Short description of the product."
        },
        "descriptionLong": {
          "type": "string",
          "description": "Long description of the product."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the product image.",
          "format": "uri"
        },
        "category": {
          "type": "string",
          "description": "Category of the product (e.g., vêtements, chaussures, accessoires, tech-style)."
        },
        "averageRating": {
          "type": "number",
          "description": "Average rating of the product."
        },
        "numberOfReviews": {
          "type": "number",
          "description": "Number of reviews for the product."
        }
      },
      "required": [
        "id",
        "name",
        "descriptionShort",
        "descriptionLong",
        "imageUrl",
        "category",
        "averageRating",
        "numberOfReviews"
      ]
    },
    "ProductVariant": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ProductVariant",
      "type": "object",
      "description": "Represents a specific variant of a product (e.g., different color or size).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the ProductVariant entity."
        },
        "productId": {
          "type": "string",
          "description": "Reference to Product. (Relationship: Product 1:N ProductVariant)"
        },
        "color": {
          "type": "string",
          "description": "Color of the product variant."
        },
        "size": {
          "type": "string",
          "description": "Size of the product variant."
        },
        "price": {
          "type": "number",
          "description": "Price of the product variant."
        },
        "discount": {
          "type": "number",
          "description": "Discount applied to the product variant."
        }
      },
      "required": [
        "id",
        "productId",
        "color",
        "size",
        "price",
        "discount"
      ]
    },
    "Order": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Order",
      "type": "object",
      "description": "Represents an order placed by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Order entity."
        },
        "customer": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string"
            },
            "email": {
              "type": "string",
              "format": "email"
            }
          }
        },
        "items": {
          "type": "array",
          "items": {
            "$ref": "#/backend/entities/OrderItem"
          }
        },
        "total": {
          "type": "number"
        },
        "status": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "OrderItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "OrderItem",
      "type": "object",
      "description": "Represents an item within an order.",
      "properties": {
        "productId": {
          "type": "string"
        },
        "variantId": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "quantity": {
          "type": "number"
        },
        "price": {
          "type": "number"
        }
      }
    },
    "Review": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Review",
      "type": "object",
      "description": "Represents a product review submitted by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Review entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Review)"
        },
        "productId": {
          "type": "string",
          "description": "Reference to Product. (Relationship: Product 1:N Review)"
        },
        "rating": {
          "type": "number",
          "description": "Rating given by the user (1-5)."
        },
        "comment": {
          "type": "string",
          "description": "Comment provided by the user."
        },
        "reviewDate": {
          "type": "string",
          "description": "Date and time when the review was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "productId",
        "rating",
        "comment",
        "reviewDate"
      ]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a product category.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Category entity (slugified name)."
        },
        "nameKey": {
          "type": "string",
          "description": "The name of the category (or a translation key)."
        },
        "imageUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL for the category's representative image."
        },
        "imageHint": {
          "type": "string",
          "description": "A hint for AI image search."
        }
      },
      "required": [
        "id",
        "nameKey",
        "imageUrl"
      ]
    },
    "SubCategory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SubCategory",
      "type": "object",
      "description": "Represents a sub-category for products, linked to a parent category.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the SubCategory entity."
        },
        "nameKey": {
          "type": "string",
          "description": "The name of the sub-category (or a translation key)."
        },
        "parentCategory": {
          "type": "string",
          "description": "The ID of the parent Category."
        }
      },
      "required": [
        "id",
        "nameKey",
        "parentCategory"
      ]
    },
    "StoreSettings": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "StoreSettings",
      "type": "object",
      "description": "Holds global settings for the store.",
      "properties": {
        "storeName": {
          "type": "string"
        },
        "contactEmail": {
          "type": "string",
          "format": "email"
        },
        "defaultCurrency": {
          "type": "string"
        },
        "defaultLanguage": {
          "type": "string"
        }
      }
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles. Uses path-based ownership. User can only access their own profile.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            }
          ]
        }
      },
      {
        "path": "/products/{productId}",
        "definition": {
          "entityName": "Product",
          "schema": {
            "$ref": "#/backend/entities/Product"
          },
          "description": "Stores product information. Publicly accessible.",
          "params": [
            {
              "name": "productId",
              "description": "The unique identifier of the product."
            }
          ]
        }
      },
      {
        "path": "/categories/{categoryId}",
        "definition": {
          "entityName": "Category",
          "schema": {
            "$ref": "#/backend/entities/Category"
          },
          "description": "Stores product categories. Publicly accessible for read operations, admin-only for writes.",
          "params": [
            {
              "name": "categoryId",
              "description": "The unique identifier for the category."
            }
          ]
        }
      },
      {
        "path": "/subcategories/{subcategoryId}",
        "definition": {
          "entityName": "SubCategory",
          "schema": {
            "$ref": "#/backend/entities/SubCategory"
          },
          "description": "Stores product sub-categories. Publicly accessible for read operations, admin-only for writes.",
          "params": [
            {
              "name": "subcategoryId",
              "description": "The unique identifier for the sub-category."
            }
          ]
        }
      },
      {
        "path": "/orders/{orderId}",
        "definition": {
          "entityName": "Order",
          "schema": {
            "$ref": "#/backend/entities/Order"
          },
          "description": "Stores all orders. Admin-only access.",
          "params": [
            {
              "name": "orderId",
              "description": "The unique identifier of the order."
            }
          ]
        }
      },
      {
        "path": "/products/{productId}/reviews/{reviewId}",
        "definition": {
          "entityName": "Review",
          "schema": {
            "$ref": "#/backend/entities/Review"
          },
          "description": "Stores reviews for each product. Users can create/modify their own reviews.",
          "params": [
            {
              "name": "productId",
              "description": "The unique identifier of the product."
            },
            {
              "name": "reviewId",
              "description": "The unique identifier of the review."
            }
          ]
        }
      },
      {
        "path": "/settings/{configId}",
        "definition": {
          "entityName": "StoreSettings",
          "schema": {
            "$ref": "#/backend/entities/StoreSettings"
          },
          "description": "Stores global configuration. Publicly readable, admin-only for writes.",
          "params": [
            {
              "name": "configId",
              "description": "The ID of the configuration document (e.g., 'storeConfig')."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is updated to be consistent with the application's data models and access patterns. Public collections like 'products', 'categories', and 'subcategories' are marked as publicly accessible for reads. Admin-centric data like 'orders' and 'settings' are defined for admin-only write access. User-specific data remains under the '/users/{userId}' path to enforce ownership-based security."
  }
}
